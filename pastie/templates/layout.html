<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:py="http://genshi.edgewall.org/"
      xmlns:xi="http://www.w3.org/2001/XInclude"
      py:strip="">

  <head py:match="head">
    <title py:with="title = unicode(select('title/text()'))">
      ${ '  -  '.join(filter(None, [u'Pastie', title])) }
    </title>
    <meta http-equiv="content-type"
          content="application/xhtml+xml; charset=UTF-8" />
    <meta name="author" content="Pedro Algarvio" />
    <meta name="copyright" content="Pedro Algarvio" />
    ${ h.stylesheet_link_tag('/css/initial.css') }
    ${ h.stylesheet_link_tag('/css/main.css') }
    ${ h.stylesheet_link_tag('/css/pygments_default.css') }

    ${ h.javascript_include_tag('/js/jquery-latest.js') }
    ${ h.javascript_include_tag('/js/jquery.interface.js') }
    ${ h.javascript_include_tag('/js/jquery.selectboxes.js') }

    <script type="text/javascript">
      $(document).ready(function() { $('#fakebody:hidden').show(); });
    </script>

    ${select("*|text()")}
    <!--! The above allows templates inheriting this one to add stuff to the head -->

  </head>


  <!--! Define some usefull functions -->
  <py:def function="paste_item(paste)">
    <span class="pasteitem">(<a href="#" id="source_${paste.id}"
                                class="viewtoggle">View</a>)</span>
    ${h.link_to(paste.title or 'Untitled',
      h.url_for('paste', id=paste.id))} by ${paste.author} posted on
    ${paste.date.strftime('%b %d, %Y at %I:%M%p')}<br />
    <div class="code_${paste.id}" style="display: none;">
    <div class="tags" py:if="paste.tags">Tags: <span style="taglist">
    <py:for each="tag in paste.tags">
      ${ h.tag.a(tag.name, href=h.url_for('pastetag', id=tag.name)) }&nbsp;
    </py:for></span>
    </div>
    ${h.code_highlight(paste)}
    </div>
  </py:def>

  <py:def function="page_nav">
    <a py:if="not c.paginator.current.first"
       href="${h.url_for(page=(c.paginator.current_page-1))}">&lt;- Prev</a>
    <span py:if="c.paginator.current.first"
          style="color: #bbb;">&lt;- Prev</span>
    <a py:if="not c.paginator.current.last"
       href="${h.url_for(page=(c.paginator.current_page+1))}">Next -&gt;</a>
    <span py:if="c.paginator.current.last"
          style="color: #bbb;">Next -&gt;</span>
  </py:def>

  <py:def function="tagcloud(tag_info)">
    <span style="font-size: ${tag[2] * 1.3}px;" py:for="tag in tag_info"><a
      href="${h.url_for('pastetag', id=tag[0])}">${tag[0]}</a>
    </span>
  </py:def>

  <!--! Define some usefull functions ENDED -->

  <body py:match="body">
    <noscript>
      <div id="warning">
        <div>
          <span>
            ${ _("Warning, your browser does not support JavaScript and is not "
                 "capable of displaying the latest web pages such as those found "
                 "on this site. Some of the functionality will be disabled.")
             }
          </span>
        </div>
      </div>
    </noscript>
    <div id="fakebody" style="display: none;">
        <div id="lang_div">
          <form id="lang_choose" method="post"
                action="${ h.url_for(controller='lang', action='index', id=None)}">
            <label for="language">Language:</label>
            <select name="locale" id="locale"
                    onChange="$('#lang_choose').submit()">
            <py:for each="locale, lang, selected in c.languages" py:choose="">
              <option py:when="selected is True" value="${ locale }"
                      selected="selected">${ lang }</option>
              <option py:otherwise="" value="${ locale }">${ lang }</option>
            </py:for>
            <input type="hidden" id="current_url" name="current_url"
                   value="${ h.url_for(qualified=True) }"/>
            <noscript>
              <input type="submit" name="submit" value="Update"/>
            </noscript>
            </select>
          </form>
        </div> <!--! lang_div ended -->
      <span id="message" class="sys-message" py:if="c.message">
        ${ c.message }
      </span>
      <div id="header">
        <br/><span>Pasties Pastebin</span>
      </div> <!--! header div ended -->
        <div id="menu">
          <ul>
            <li>${ h.link_to_unless_current(_('New'),
                                            h.url_for('newpaste')) }</li>
            <li>${ h.link_to_unless_current(_('All'),
                                            h.url_for(controller='pasties',
                                            action='index', id=None)) }</li>
            <li>${ h.link_to_unless_current(_('Tags'),
                                            h.url_for('pastetags')) }</li>
          </ul>
        </div> <!--! menu div ended -->
      <div id="content">
        <!--! Grab inheriting templates body -->
        ${select("*|text()")}
      </div> <!--! content div ended -->
    </div> <!--! fakebody div ended -->

    <div id="footer2">
      <span id="copy1" xml:lang="en" title="click..." class="copyright"><b>&copy;</b></span>
      <span id="copy2" xml:lang="en" title="click..." class="copyright">
        2007 &copy; Pedro Algarvio
      </span>
    </div>
    <script type="text/javascript">
      $(document).ready(function() { /*pngFix();*/ $('#copy2').hide(); });
      $('#copy1').click(function() {
        $(this).SlideOutLeft(600);
        $('#copy2').SlideInLeft(300);
      });
      $('#copy2').click(function() {
        $(this).SlideOutLeft(500);
        $('#copy1').SlideInLeft(300);
      });
    </script>
    <script type="text/javascript" py:if="c.message">
      $(document).ready(function() {
        setTimeout("$('#message').Puff(400);", 10000);
      });
    </script>
  </body>
</html>
<!--!
$Id: layout.html 3 2007-12-24 19:03:39Z s0undt3ch $
vim: sw=2 ts=2 fenc=utf-8 ft=kid et
-->
